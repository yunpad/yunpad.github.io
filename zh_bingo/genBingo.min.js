$(function(){var _1,_2;if(localStorage.getItem("hanziBingo")){var _3=JSON.parse(localStorage.getItem("hanziBingo"));window.localStorage.clear();_1=_3["data"].slice(0,18);_2=_3["task"];console.log(_1);console.log(_2);}var _4=d3.select("body").append("svg").attr("width","100%").attr("height","100%");var _5;var _6=6;var _7=3;_4.append("rect").attr({"x":0,"y":0,"width":842,"height":595,"rx":5,"ry":5}).style("fill","none").style("stroke","black");if(_2=="caller"){document.title="生成caller卡";_8(_1);}if(_2=="tickets"){_9(_1);document.title="生成tickets卡";}_4.append("text").attr({x:8,y:32}).attr("transform","translate(623,560)").style({"fill":"gray","stroke-width":0+"px","font-size":1.2+"em","text-anchor":"right","font-family":"sans-serif"}).text("10year.wordpress.com");function _a(_b){var _c,_d,_e=_b.length;if(_e){while(--_e){_d=Math.floor(Math.random()*(_e+1));_c=_b[_d];_b[_d]=_b[_e];_b[_e]=_c;}}return _b;};function _f(d,i){var _10=Math.floor(i/_6);var _11=i%_6;var x=20+(48*_11);var y=15+(48*_10);return "translate("+[x,y]+")";};function _12(_13,_14){var _15=4;var _16=_4.append("g").classed("grids",true).attr("transform","translate(10, 16), scale(.9)");var _17=_16.selectAll("g").data(_14).enter().append("g").attr("transform",function(d,i){var n=Math.floor(i/_15);var x=n*300;var y=(i-n*_15)*(48*_7+10);return "translate("+[x,y]+")";});var _18=_17.selectAll("g").data(Object).enter().append("g").append("rect").attr("transform",function(d,i){return _f(d,i);}).attr({"x":0,"y":0,"width":45,"height":45,"rx":5,"ry":5}).style({"stroke-width":"2","stroke":"#C0C0C0","fill":"none",});var _19=_17.selectAll("g").data(Object).append("text").attr("transform",function(d,i){return _f(d,i);}).attr({x:8,y:32}).style({"fill":"#232323","stroke-width":0+"px","font-size":1.8+"em","text-anchor":"right","font-family":"sans-serif"}).text(function(d,i){var txt="";if(d>0){txt=_13[d-1];}return txt;});};function _9(_1a){var _1b=18;var _1c=Math.min(_1b,_1a.length);var _1d=12;var _1e=Math.min(_1c,9);var _1f=new Array();var _20=new Array();var bd=new Array();for(i=0;i<_1c;++i){_20[i]=i+1;}for(i=0;i<_1d;++i){bd=[];_20=_a(_20);indx=Math.floor(Math.random()*_1c);for(j=0;j<_1e;++j){bd[j]=_20[indx%_1c];indx=indx+1;}for(j=_1e;j<_1b;++j){bd[j]=0;}_1f[i]=_a(bd);}_12(_1a,_1f);};function _8(_21){var _22=_4.append("g").classed("group1",true).attr("transform","translate(-35, 60), scale(2.8)");var _23=_22.selectAll("g").data(_21).enter().append("g").attr("transform",function(d,i){return _f(d,i);});var _24=_23.append("rect").attr({"x":0,"y":0,"width":45,"height":45,"rx":5,"ry":5}).style({"stroke-width":"2","stroke":"#C0C0C0","fill":"none",});var _25=_23.append("text").attr({x:8,y:33}).style({"fill":"#232323","stroke-width":0+"px","font-size":1.8+"em","text-anchor":"right","font-family":"sans-serif"}).text(function(d,i){return d;});};});